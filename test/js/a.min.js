function trim(t){var e=t.replace(/^\s*$/g,"");return e}function bindEvent(t,e,i){document.addEventListener?t.addEventListener(e,i,!1):t.attachEvent(e,i)}function delEvent(t,e,i){document.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent(e,i)}function addClass(t,e){var i=new RegExp("\\b"+e+"\\b");if(t.length>1)for(var n=0;n<t.length;n++)i.test(t[n].className)||(t[n].className?t[n].className+=" "+e:t[n].className=e);else i.test(t.className)||(t.className?t.className+=" "+e:t.className=e);return t}function removeClass(t,e){var i=new RegExp("\\b"+e+"\\b","g");if(t.length>1)for(var n=0;n<t.length;n++)t[n].className=t[n].className.replace(i,"").replace(/\s+/g," ");else t.className=t.className.replace(i,"").replace(/\s+/g," ");return t}function createScript(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("script");i.src=t,i.charset="utf-8",e.appendChild(i)}function _ajax(t,e,i){var n=null;n=window.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,n.onreadystatechange=function(){n.status>=200&&n.status<300||304==n.status?e(JSON.parse(n.responseText)):i()},n.open("get",t,!1),n.send(null)}function getWinWidth(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0}function getWinHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}function getWinScrollHeight(){return document.documentElement.scrollTop||document.body.scrollTop}function newsMore(){for(var t=document.querySelectorAll(".j_newsBtn"),e=0;e<t.length;e++)bindEvent(t[e],"click",function(){for(var t=this.parentNode.previousElementSibling||this.parentNode.previousSibling,e=this.nextElementSibling||this.nextSibling,i=t.querySelectorAll(".hide"),n=0;n<i.length;n++)removeClass(i[n],"hide");removeClass(this,"show"),addClass(this,"hide"),removeClass(e,"hide"),addClass(e,"show")})}function picHeight(){var t=document.querySelectorAll(".j_newspic_dt"),e=document.querySelectorAll(".j_newspic_dd"),i=Math.ceil((getWinWidth()-24-4)/2),n=Math.floor(3*i/4)-5,r=document.querySelectorAll(".news_pic_items a"),o=document.querySelectorAll(".j_newspic_dd a");if(t&&e){for(var s=0;s<t.length;s++)t[s].style.height=e[s].offsetHeight-4+"px";for(var s=0;s<o.length;s++)o[s].style.height=n+"px"}for(var s=0;s<r.length;s++)r[s].style.height=n+"px"}function scrollTop(){function t(){var t=getCurIndex(),e=s[t]?s[t].querySelectorAll("img"):[],i=s[t-1]?s[t-1].querySelectorAll("img"):[],n=s[t+1]?s[t+1].querySelectorAll("img"):[];if(e.length>0)for(var r=0;r<e.length;r++)e[r].getAttribute("data-src")&&e[r].getAttribute("data-src")!=e[r].src&&(e[r].src=e[r].getAttribute("data-src"));if(n.length>0)for(var r=0;r<n.length;r++)n[r].getAttribute("data-src")&&n[r].getAttribute("data-src")!=n[r].src&&(n[r].src=n[r].getAttribute("data-src"));if(i.length>0)for(var r=0;r<i.length;r++)i[r].getAttribute("data-src")&&i[r].getAttribute("data-src")!=i[r].src&&(i[r].src=i[r].getAttribute("data-src"));picHeight()}var e,i=document.querySelector(".j_topBtn"),n=getWinHeight(),r=1.5*n,o=getWinScrollHeight(),s=document.querySelectorAll(".news_module");t(),bindEvent(window,"scroll",function(n){getWinScrollHeight()>r&&getWinScrollHeight()<o?(addClass(i,"showbtn"),e&&clearTimeout(e),e=setTimeout(function(){removeClass(i,"showbtn")},3e3)):removeClass(i,"showbtn"),t(),o=getWinScrollHeight()}),bindEvent(i,"click",function(){window.scrollTo(0,0)})}function rollInit(){for(var t=document.querySelectorAll(".j_roll"),e=0;e<t.length;e++){t[e].id="iRoll"+e;new IRoller("iRoll"+e)}}function slideStyleInit(){var t=document.querySelector(".j_imgSlide"),e=t.children[0],i=Math.ceil(getWinWidth()/2);t.style.height=i+"px",e.style.height=i+"px"}function tabInit(t,e){if(t.length>0&&t.length===e.length)for(var i=0;i<t.length;i++)t[i].index=i,0==i?(addClass(t[i],"on"),removeClass(e[i],"hide")):(removeClass(t[i],"on"),addClass(e[i],"hide")),bindEvent(t[i],"click",function(){for(var t=this.parentNode.children,i=0;i<t.length;i++)i==this.index?(addClass(t[i],"on"),removeClass(e[i],"hide")):(removeClass(t[i],"on"),addClass(e[i],"hide"))})}function moduleInit(){for(var t=document.querySelectorAll(".j_newsModule"),e=document.querySelectorAll(".j_navTab"),i=0;i<t.length;i++)tabInit(e[i].children,t[i].children[0].children)}function iScrollInit(){for(var t=document.querySelectorAll(".j_scroll"),e=0;e<t.length;e++){t[e].id="iScroll"+e;new IScroller("iScroll"+e)}}function getCurIndex(){for(var t=document.querySelectorAll(".news_module"),e=document.querySelectorAll(".j_newsModule")[0].offsetTop,i=0;i<t.length;i++)if(t[i].getBoundingClientRect().top<=0&&t[i].getBoundingClientRect().bottom>=87&&getWinScrollHeight()>e)return i;return-1}function tabNav(){function t(){var t=getCurIndex();if(-1!==t){addClass(n,"fixed_show"),n.innerHTML=e[t].innerHTML;var o=e[t].getAttribute("data-sudaclick");o?n.setAttribute("data-sudaclick",o):n.removeAttribute("data-sudaclick");for(var s=n.children,a=0;a<s.length;a++)s[a].index=a,s[a].tab=e[t].children[a],s[a].item=i[t].children[0].children[a],bindEvent(s[a],"click",function(){var e=this.parentNode.children,i=this.tab,n=i.parentNode.children;item=this.item,items=item.parentNode.children;for(var o=0;o<e.length;o++)o==this.index?(addClass(e[o],"on"),addClass(n[o],"on"),removeClass(items[o],"hide")):(removeClass(e[o],"on"),removeClass(n[o],"on"),addClass(items[o],"hide"));window.scrollTo(0,r[t].offsetTop)})}else removeClass(n,"fixed_show")}var e=document.querySelectorAll(".j_navTab"),i=document.querySelectorAll(".j_newsModule"),n=document.querySelector(".news_tab_fixed"),r=document.querySelectorAll(".news_module");t(),bindEvent(window,"scroll",function(){t()})}alert("a");try{var IRoller=function(t){this.wrap=document.getElementById(t),this.rollItem=this.wrap.children,this.len=this.rollItem.length,this.currentNum=0,this._height=this.wrap.offsetHeight,this.interval=3e3,this.timer=null,this.firstInit=!0,this.wrap.children.length<2||(2==this.wrap.children.length&&(this.wrap.appendChild(this.rollItem[0].cloneNode(!0)),this.wrap.appendChild(this.rollItem[1].cloneNode(!0)),this.rollItem=this.wrap.children,this.len=this.rollItem.length),this.round=function(t){return this.currentNum+t<0?this.currentNum+t+this.len:this.currentNum+t>this.len-1?this.currentNum+t-this.len:this.currentNum+t},this.translate=function(t,e,i){var n=navigator.userAgent.toLowerCase(),r=t&&t.style;r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=i+"ms",r.webkitTransitionTimingFunction=r.MozTransitionTimingFunction=r.msTransitionTimingFunction=r.OTransitionTimingFunction=r.transitionTimingFunction="ease-in-out",-1!=n.indexOf("gt-")?r.webkitTransform="translateY("+e+"px)":r.webkitTransform="translate3d(0, "+e+"px, 0)",r.msTransform=r.MozTransform=r.OTransform="translateY("+e+"px)"},this.setAnimation=function(){for(var t=this,e=0;e<t.len;e++)e==t.round(-1)?(t.firstInit?t.translate(t.rollItem[e],-t._height,0):t.translate(t.rollItem[e],-t._height,1e3),t.rollItem[e].style["z-index"]=5):e==t.round(1)?(t.firstInit?t.translate(t.rollItem[e],t._height,0):t.translate(t.rollItem[e],t._height,1e3),t.rollItem[e].style["z-index"]=5):e==t.currentNum?(t.firstInit?t.translate(t.rollItem[e],0,0):t.translate(t.rollItem[e],0,1e3),t.rollItem[e].style["z-index"]=5):(t.translate(t.rollItem[e],t._height,0),t.rollItem[e].style["z-index"]=1)},this.init=function(){var t=this;t.setAnimation(),t.timer=setInterval(function(){t.currentNum=t.round(1),t.firstInit=!1,t.setAnimation()},t.interval)},this.init())},Swiper=function(t,e,i){if(this.wrap=t,this.tabs=e?e.children:null,this.currentNum=i.startIndex||0,this.auto=i.auto&&!0,this.interval=i.interval||3e3,this.speed=i.speed||300,this.maxHeight=i.maxHeight||1/0,this.callback=i.callback||null,this.circular=i.circular||!1,this.innerWrap=this.wrap.children[0],this.items=this.innerWrap.children,this.len=this.items.length,0!=this.len){if(1==this.len)return this.wrap.style.height=this.items[0].offsetHeight,void(this.wrap.style.width=this.items[0].offsetWidth);2==this.len&&this.circular&&(this.innerWrap.appendChild(this.items[0].cloneNode(!0)),this.innerWrap.appendChild(this.items[1].cloneNode(!0)),this.len=4),this._width=0,this._height=0,this.X=0,this.curX=0,this.Y=0,this.curY=0,this.direction=0,this.eventInit=!1,this.firstInit=!1,this.slideTimer=null,this.timerCleared=!1,this.isScrolling=!1,this.isValidSlide=!1,this.init()}};Swiper.prototype={init:function(){var t=this;t.wrap.style.position="relative",t.innerWrap.style.position="relative",t._width=t.wrap.getBoundingClientRect().width||t.wrap.offsetWidth,t._height=Math.min(t.items[t.currentNum].getBoundingClientRect().height||t.items[t.currentNum].offsetHeight,t.maxHeight),t.innerWrap.style.width=t._width+"px",t.innerWrap.style.height=t._height+"px";for(var e=0;e<t.len;e++)t.items[e].style.position="absolute",t.items[e].style.left="0",t.items[e].style.top="0";t.firstInit=!0,t.gotoPage(t.currentNum),t.eventInit||(t.addEvent(),t.eventInit=!0),t.auto&&!t.timerCleared&&(t._stop(),t.slideTimer=setInterval(function(){t.gotoPage(t.round(1))},t.interval),t.timerCleared=!1)},touchX:function(t){return t.touches?t.touches[0].pageX:t.pageX},touchY:function(t){return t.touches?t.touches[0].pageY:t.pageY},setAnimation:function(){for(var t=this.items,e=(this.tabs,this.len),i=this.speed,n=this._width,r=this.round(1),o=this.round(-1),s=this.currentNum,a=0;e>a;a++)this.circular?a==r?(this.firstInit||this.timerCleared?this.translate(t[a],n,0):this.translate(t[a],n,i),t[a].style.display="block"):a==o?(this.firstInit||this.timerCleared?this.translate(t[a],-n,0):this.translate(t[a],-n,i),t[a].style.display="block"):a==s?(this.firstInit||this.timerCleared?this.translate(t[a],0,0):this.translate(t[a],0,i),t[a].style.display="block"):(t[a].style.display="none",this.translate(t[a],-n,i)):(this.firstInit?this.translate(t[a],(a-s)*n,0):this.translate(t[a],(a-s)*n,i),t[a].style.display="block");this.firstInit=!1,this.maxHeight===1/0&&(this.innerWrap.style.height=this.items[s].offsetHeight+"px")},translate:function(t,e,i){var n=navigator.userAgent.toLowerCase(),r=t&&t.style;r.webkitTransitionDuration=r.MozTransitionDuration=r.msTransitionDuration=r.OTransitionDuration=r.transitionDuration=i+"ms",r.webkitTransitionTimingFunction=r.MozTransitionTimingFunction=r.msTransitionTimingFunction=r.OTransitionTimingFunction=r.transitionTimingFunction="ease-in-out",-1!=n.indexOf("gt-")?r.webkitTransform="translateX("+e+"px)":r.webkitTransform="translate3d("+e+"px, 0, 0)",r.msTransform=r.MozTransform=r.OTransform="translateX("+e+"px)"},switchTab:function(){var t=this.tabs,e=t?this.currentNum%t.length:void 0;if(t&&t.length>0)for(var i=0;i<t.length;i++)i==e?addClass(t[e],"on"):removeClass(t[i],"on")},slide:function(t){var e=this,i=e._width,n=e.currentNum,r=e.items,o=e.round(1),s=e.round(-1);(!this.circular&&-1!=o&&-1!=s||this.circular)&&(this.translate(r[n],t,0),this.translate(r[o],i+t,0),this.translate(r[s],-i+t,0))},round:function(t){return this.circular?this.currentNum+t<0?this.currentNum+t+this.len:this.currentNum+t>this.len-1?this.currentNum+t-this.len:this.currentNum+t:this.currentNum+t<0||this.currentNum+t>this.len-1?-1:this.currentNum+t},addEvent:function(){var t=this.innerWrap,e=this.tabs,i=this;if(bindEvent(t,"touchstart",function(t){i._touchstart(t)}),bindEvent(t,"touchmove",function(t){i._touchmove(t)}),bindEvent(t,"touchend",function(t){i._touchend(t)}),bindEvent(window,"resize",function(){i.init()}),e&&e.length>0)for(var n=0;n<e.length;n++)e[n].index=n,bindEvent(e[n],"click",function(){i.gotoPage(this.index)})},_stop:function(){this.timerCleared||(clearInterval(this.slideTimer),this.timerCleared=!0)},_touchstart:function(t){this.X=this.touchX(t),this.Y=this.touchY(t),this.isScrolling=void 0},_touchmove:function(t){var e,i,n=this;n.curX=n.touchX(t),n.curY=n.touchY(t),e=n.curX-n.X,i=n.curY-n.Y,"undefined"==typeof n.isScrolling&&(n.isScrolling=!!(n.isScrolling||Math.abs(e)<Math.abs(i))),n.isScrolling||(t.preventDefault(),n._stop(),n.slide(e))},_touchend:function(t){var e=this,i=e.innerWrap,n=0,r=0;if(0==e.curX&&(e.curX=e.X),0==e.curY&&(e.curY=e.Y),n=e.curX-e.X,r=e.curY-e.Y,e.curX=0,e.curY=0,Math.abs(n)>Math.abs(r))if(Math.abs(n)>30?(e.isValidSlide=!0,e.direction=n>0?1:0):e.isValidSlide=!1,e.isValidSlide){var o=1==e.direction?e.round(-1):e.round(1);e.gotoPage(o)}else e.setAnimation();delEvent(i,"touchstart",function(t){e._touchstart(t)}),delEvent(i,"touchmove",function(t){e._touchmove(t)})},gotoPage:function(t){-1!=t&&(this.currentNum=t,this.setAnimation(),this.switchTab(),this.callback(this.items[t],t,this.direction))},kill:function(){var t=this,e=t.wrap,i=t.tabs;this._stop();for(var n=this.len;n--;){var r=this.items[n];r.style["-webkit-transition-duration"]="0s",r.style.display="block",r.style["-webkit-transform"]="translate3d(0, 0, 0)"}if(delEvent(e,"touchstart",function(e){t._touchstart(e)}),delEvent(e,"touchmove",function(e){t._touchmove(e)}),delEvent(e,"touchend",function(e){t._touchend(e)}),delEvent(window,"resize",function(){t.init()}),i&&i.length>0)for(var o=0;o<i.length;o++)i[o].index=o,delEvent(i[o],"click",function(){t.gotoPage(this.index)})}};var IScroller=function(t){this.wrap=document.getElementById(t),this.parentW=0,this.scrollItem=this.wrap.children,this.len=this.scrollItem.length,this._width=this.scrollItem[0].offsetWidth,this._height=this.scrollItem[0].offsetHeight,this.actualW=this._width*this.len,this.currentPos=0,this.X=0,this.curX=0,this.Y=0,this.curY=0,this.isScrolling=!1,this.init()};IScroller.prototype={init:function(){var t=this;this.parentW=this.wrap.offsetWidth,t.wrap.style.width=t.actualW+"px",t.wrap.style.height=t._height+"px",t.actualW>t.parentW?t.addEvent():this.currentPos=0,t.setAnimation()},touchX:function(t){return t.touches?t.touches[0].pageX:t.pageX},touchY:function(t){return t.touches?t.touches[0].pageY:t.pageY},setAnimation:function(){var t=this,e=t.wrap;e.style["-webkit-transition"]="-webkit-transform 0.3s ease-in-out",e.style["-webkit-transform"]="translate3d("+t.currentPos+"px, 0, 0)"},slide:function(t){var e=this,i=e.wrap;i.style["-webkit-transition-duration"]="0s",i.style["-webkit-transform"]="translate3d("+(e.currentPos+t)+"px, 0, 0)"},addEvent:function(){var t=this.wrap,e=this;bindEvent(t,"touchstart",function(t){e._touchstart(t)}),bindEvent(t,"touchmove",function(t){e._touchmove(t)}),bindEvent(t,"touchend",function(t){e._touchend(t)})},_touchstart:function(t){this.X=this.touchX(t),this.Y=this.touchY(t),this.isScrolling=void 0},_touchmove:function(t){var e,i,n=this;n.curX=n.touchX(t),n.curY=n.touchY(t),e=n.curX-n.X,i=n.curY-n.Y,"undefined"==typeof n.isScrolling&&(n.isScrolling=!!(n.isScrolling||Math.abs(e)<Math.abs(i))),n.isScrolling||(t.preventDefault(),n.slide(e))},_touchend:function(t){var e=this,i=e.wrap,n=0,r=0;0==e.curX&&(e.curX=e.X),0==e.curY&&(e.curY=e.Y),n=e.curX-e.X,r=e.curY-e.Y,e.curX=0,e.curY=0,Math.abs(n)>Math.abs(r)&&(e.currentPos+n>0?e.currentPos=0:e.currentPos=Math.max(e.currentPos+n,e.parentW-e.actualW),e.setAnimation()),delEvent(i,"touchstart",function(t){e._touchstart(t)}),delEvent(i,"touchmove",function(t){e._touchmove(t)})}},setTimeout(function(){rollInit(),slideStyleInit(),moduleInit(),iScrollInit(),tabNav(),scrollTop(),window.addEventListener("resize",function(){picHeight(),slideStyleInit()})},300),function(){function t(t,e,i){document.addEventListener?t.addEventListener(e,i,!1):t.attachEvent(e,i)}function e(e,i,r){var e=e||document.location.hostname||document.location.host||document.location.href.match(/http:\/\/([^\/]+)/i)&&document.location.href.match(/http:\/\/([^\/]+)/i)[1],i=i||document.location.pathname||document.location.href.match(/http:\/\/[^\/]+(.*)/i)&&document.location.href.match(/http:\/\/[^\/]+(.*)/i)[1],r=r||document.location.search||document.location.href.match(/.*(\?.*)/)&&document.location.href.match(/.*(\?.*)/)[1],o=e&&null!==e.match(/.*\.?sina\.cn/i),s=i&&i.match(/.*(\.d\.html)/i),a=r&&r.match(/from=qudao&?/i),c=e&&e.match(/lives.sina.cn/i),h="main";if(d=e+i,a&&(d+=r),o){var u=document.querySelector(".promotion_cover");if(u&&document.body.removeChild(u),(s&&!a||c)&&(h="share",document.body.style["margin-top"]="60px",setTimeout(function(){window.scrollTo(0,0)},100)),"main"==h&&!n(d))return;var m=document.createElement("link");m.href="http://mjs.sinaimg.cn/wap/module/promote_float/201503271544/css/index.min.css",m.rel="stylesheet",m.type="text/css",document.head.appendChild(m);var f=document.createElement("div");f.innerHTML='<div class="promotion_cover '+h+'" id="promotionCover"><div href="#" class="cover_content"><img src="http://mjs.sinaimg.cn/wap/module/promote_float/201503271400/images/logo.jpg" /><p class="title">新浪新闻</p><p class="subtitle">安装新浪新闻，随时知晓天下事</p><a class="action_btn" href="javascript:void(0);">打开</a></div><a class="close_btn" href="javascript:void(0);"><i class="r"></i><i class="l"></i></a></div>',document.body.appendChild(f.childNodes[0]),setTimeout(function(){var e=document.querySelector("#promotionCover");t(e,"click",function(t){var e=t.target,i=e.path,n=5;if(i)for(var r=0,o=i.length;o>r&&(n&&i[r]!=this&&i[r]!=window&&!l(i[r]));r++)n--;else for(;n&&n&&e!=this&&e!=window&&!l(e);)e=e.parentElement,n--})},500)}}function i(){var t=new Date;return t.toDateString()}function n(t){var e=null;try{e=JSON.parse(localStorage.sina_pro_cover)}catch(n){e=null}if(e&&e[t]){if(e[t]==i())return!1;delete e[t]}return localStorage.sina_pro_cover=JSON.stringify(e),!0}function r(t){var e=localStorage.sina_pro_cover;try{e=JSON.parse(e)}catch(n){e={}}"[object Object]"!=Object.prototype.toString.call(e)&&(e={}),e[t]=i(),localStorage.sina_pro_cover=JSON.stringify(e)}function o(){var t=navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)?!0:!1}function s(){o()&&(window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.sina.news");var t={iosInstallUrl:"http://sina.cn/j/d.php?k=82",androidInstallUrl:"http://sina.cn/j/d.php?k=82",iosNativeUrl:"sinanews://news.sina.cn",androidNativeUrl:"sinanews://news.sina.cn"};c.init(t)}function a(){if(!document.getElementById("download_send_track_fix")){var t=document.createElement("iframe");t.id="download_send_track_fix",t.style.cssText="display:none;width:0px;height:0px;",t.src="http://open.api.sina.cn/count/appview",document.body.appendChild(t)}}function l(t){switch(t.className){case"close_btn":var e=document.querySelector("#promotionCover");return document.body.removeChild(e),r(d),!0;case"action_btn":var i=(new Date).valueOf();return i-h>u&&(h=i,a(),s()),!0;default:return!1}}var c={init:function(t){var e=this;e.platform=e._UA(),e.platform&&("ios"==e.platform?(e.installUrl=t.iosInstallUrl,e.nativeUrl=t.iosNativeUrl,e.openTime=t.iosOpenTime||800):(e.installUrl=t.androidInstallUrl,e.nativeUrl=t.androidNativeUrl,e.openTime=t.androidOpenTime||3e3),"ios"!=e.platform&&navigator.userAgent.match(/Chrome/i)?e._hackChrome():e._gotoNative())},_hackChrome:function(){var t=this,e=Date.now(),i=t.nativeUrl.split("://"),n=(i[0],i[1],new Image);n.src=t.schemejc,t._gotoDownload(e)},_gotoNative:function(){var t=this,e=Date.now(),i=document,n=i.body,r=i.createElement("iframe");r.id="J_redirectNativeFrame",r.style.display="none",r.src=t.nativeUrl,n?n.appendChild(r):setTimeout(function(){i.body.appendChild(r)},0),setTimeout(function(){i.body.removeChild(r),t._gotoDownload(e)},t.openTime)},_gotoDownload:function(t){var e=this,i=Date.now();i-t<e.openTime+500&&(window.location=e.installUrl)},_UA:function(){var t=navigator.userAgent;t.match(/Android/i);return t.match(/iphone|ipod/gi)?"ios":t.match(/Android/i)?"android":""}},h=0,u=1e4,d=null;setTimeout(function(){e()},100)}()}catch(e){throw new Error(e+" http://mjs.sinaimg.cn/wap/homev6/201507301647/js/home.min.js")}abc(),alert("a");
//# sourceMappingURL=a.js.map